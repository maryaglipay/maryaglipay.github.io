<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-12-10">

<title>Mary Aglipay - Defend!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Mary Aglipay</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Defend!</h1>
  <div class="quarto-categories">
    <div class="quarto-category">thesis</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 10, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>This is a fun blog where I basically I pick up my proposal and explain how I would defend it, in three brief points. I’ve already gone through my proposal and did the criticizing! Let’s go!</p>
<ol type="1">
<li>Can you elaborate on the prevalence of neurological and cardiovascular sequelae in your proposal?</li>
</ol>
<ul>
<li>Cognitive deficits ~ cumulative incidence is 5% vs 3%</li>
<li>Seizures cumulative incidence is 3% vs 1%</li>
<li>MISC - estimates from the states have this at 2 per 100 000.</li>
<li>Reports of dysrhythmia and increased inflammatory markers.</li>
</ul>
<ol start="2" type="1">
<li>What is the impact of your work?
<ol type="1">
<li><p>Some of the most sweeping changes to public health in recent memory.</p></li>
<li><p>A record of what children did during this pandemic and an evaluation of the impact</p></li>
<li><p>If we are the kind of healthcare system that cares about evidence-based interventions and evidence-based messaging, this is something we’ll need going forward for this pandemic and fof future ones.</p></li>
</ol></li>
<li>Do you think that this will change the minds of parents?
<ol type="1">
<li><p>That’s hard to say- We have to respect the value systems and realities of families</p></li>
<li><p>I am the kind of parent who really values science, and evidence–but I also recognize that I have immense privilege that helps me not only to carry out some of the NPIs, but to understand and respect the scientific literature.</p></li>
<li><p>My job is to carry out the work, provide the evidence, and help families and policymakers carry out informed decision making, not to change their mind.</p></li>
</ol></li>
<li>How will you deal with a null result?
<ol type="1">
<li><p>One thing to do is to look at the effect size. If we find that the effect is large, and we just don’t have enough precision around our estimate, perhaps it’s an issue with</p></li>
<li><p>Another thing we’ll have to think carefully is about the comparison we want to make, about the trial we’re looking to emulate. And it’s about a child increasing their adherence by one day a week. Maybe one day isn’t enough. And we’re not asking their mother, father, teacher, classmates, to increase adherence by one day- we’re asking children. maybe that’s not enough either and we have to think about these.</p></li>
</ol></li>
<li>How will your results apply now that we’re looking at re-infections
<ol type="1">
<li><p>You’re right. Conversation is turning toward re-infection</p>
<ol type="1">
<li><p>My second study is looking at time to first infection; so we’re not really looking at re-infection per-se, using any kind of recurrent event analysis, I think mainly in an effort to simplify an already complex analysis.</p>
<ol type="1">
<li><p>But I think re-infection is an important question, and I think something for a future study, particularly because we know that in the omicron period offers very little protection.</p>
<ol type="1">
<li>This project is a start, and I think can certainly lend itself to other kinds of analysis.</li>
</ol></li>
</ol></li>
</ol></li>
<li><p>my third study is not looking at first infection per se, but infection over our study period. This includes children with and without previous covid infection.</p></li>
</ol></li>
<li>How will you deal with a null result for VE?
<ol type="1">
<li><p>First we have to deal with our checks and balances. Did we account for all confounders? Are there selection biases at play? Were we able to measure everything accurately. Were our models specified correctly?</p></li>
<li><p>First thing to do is look at the point estimate. Is it big? Then look at the precision around that estimate. Perhaps we simply did not have enough children testing with PCR to find enough results</p></li>
<li><p>And then, if we think we’ve found a true, null result. This is really important information too. We’ll have to compare to other studies in this age group to see if it’s consistent. Work closely with a knowledge broker.</p></li>
</ol></li>
<li></li>
</ol>
<hr>
<p>Project 1</p>
<p>2. Why a summary measure?</p>
<ul>
<li>will be doing each behaviour individually as well</li>
<li>summary measure an overall measure of adherence based on 6 behaviours advocated by public health</li>
<li>true that some behaviours are very similar, may weigh more in summary measure; scale development in this area needed</li>
</ul>
<ol start="3" type="1">
<li>How do you expect those who remain in the study and those who drop out to be different?</li>
</ol>
<ul>
<li>processes the give rise to initial participation in research are often the ones that help retain people</li>
<li>socioeconomic indicators: family income, maternal ethnicity, employment, dwelling type, income support, forward sorting area, essential worker status, infection status.</li>
<li>including these factors in the model adjusts for them- so holding these factors equal, what is the expected value of adherence.</li>
</ul>
<ol start="4" type="1">
<li>Why not weight rather than condition?</li>
</ol>
<ul>
<li>weighting is also perfectly valid–can do inverse probability of censoring weights</li>
<li>I suspect results will be similar</li>
<li>adjustment gives you a result that is straightforward, intuitive but we can certainly consider weights</li>
</ul>
<p>5.How did you come up with this list of baseline confounders? - parents of the exposure, parents of the outcome, and non-instrument - literature - DAG</p>
<ol start="6" type="1">
<li>Why did you decide to do an interrupted time series analysis?</li>
</ol>
<ul>
<li>lent itself well to the question, figuring out the jump and drop in adherence, and the trends over time</li>
<li>also good since we have multiple time points before and after the drop</li>
<li>it’s relatively well easy to interpret</li>
</ul>
<ol start="7" type="1">
<li>Why not a difference in differences analysis?</li>
</ol>
<ul>
<li>require a control group that did not experience closures at same time</li>
<li>control group needs to be similar socially, demographically, politically - I’m not sure I have a similar one</li>
<li>I don’t have NPI measures anywhere else</li>
</ul>
<ol start="8" type="1">
<li>How will you deal with the cadence changes?</li>
</ol>
<ul>
<li>try to treat it as continuous as much as possible.</li>
<li>there is going to be interpolation between measures, but cadence changes where necessary to keep engagement up in the cohort and avoid attrition.</li>
<li>in the event where we find we just don’t have enough time points to assess jump/drop adherence before and after the interruption, we’ll consider a pre-post analysis, which is not as strong and doesn’t enable you to see slopes or immediate jumps for that matter. We consider synthetic controls–for example, there’s a cohort out in Montreal that may or may not use similar measures to our own, but as to the availability of the data, we’re not certain.</li>
</ul>
<ol start="9" type="1">
<li>Why random intercepts and not random slopes?
<ul>
<li>I think we could consider random slopes too–if we think there’s going to be a large variation in NPI adherence over time within individual and within family.</li>
<li>Plan is to start simple and build complexity</li>
<li>Use likelihood ratio tests to see if adding random slopes contributes significantly to the fit of the model</li>
</ul></li>
<li>Why does your SS calculation consider 0.5 days difference a week an important change?
<ul>
<li>Half a day seemed a good place to start.</li>
<li>Considered going down as low as 0.25 days, means you’ll need about 1300 participants in the study.</li>
</ul></li>
<li>Can you consider splines in segmented linear mixed effects regression?
<ul>
<li>Great question. If I want to be able to compare slopes before and after the jump, this will be hard to do in a straightforward way with splines.</li>
<li>We’ll have to choose a timepoint before and after the jump to compare.</li>
</ul></li>
<li>Why did you consider such large loss to follow-up?
<ul>
<li><p>Great question. We know that the cohort study had really excellent follow-up after 6 months, as high as 80%.</p></li>
<li><p>We know that this has declined since then- the extent to which it has declined, I haven’t yet seen the data yet, so I can’t comment here.</p></li>
<li><p>We’ll try to mitigate this by:</p>
<ul>
<li><p>adjusting for factors associated with censoring</p></li>
<li><p>we’ll use multiple imputation to impute covariates</p></li>
<li><p>really consider the factors that are on that backdoor path opened by only including the non-censored, and adjusting where we can to block that path.</p></li>
<li><p>Consider inverse probability of censoring weighting/ standardization methods</p></li>
</ul></li>
</ul></li>
<li>What will be the impact of large loss to follow-up on your results?
<ul>
<li><p>If there is substantial drop-out, we are going to have a consideral selection bias probelm to worry about. And the direction and size of that bias is hard to say at this stage.</p></li>
<li><p>and we’ll have to use every tool at our disposal to help it</p>
<ul>
<li><p>Inverse probability of censoring weighting, standardization by censoring</p>
<ul>
<li><p>Multiple imputation,</p></li>
<li><p>Examining the backdoor paths</p></li>
</ul></li>
</ul></li>
</ul></li>
<li>What chronic conditions are excluded from your cohort?
<ol type="1">
<li><p>TARGet Kids! is about Healthy growth</p>
<ol type="1">
<li><p>Severe congenital abnormalities</p></li>
<li><p>Prader-Willi syndrome</p></li>
<li><p>Failure to Thrive</p></li>
<li><p><br>
</p></li>
</ol></li>
</ol></li>
</ol>
<hr>
<p><strong>Project 2</strong></p>
<ol type="1">
<li>How did you choose the variables?
<ul>
<li><p>Figure 2 is not the entire list, this is for demonstrative purposes</p></li>
<li><p>Appendix has a big list of variables that were chosen by confounding criteria according to Vanderwheele and Shpitser-includes things like sociodemographics, parent occupation and financial security, family history of illness and pregnancy, childcare arrangement, public health preventive measures, child health condition, parent health condition, infection status, etc.</p></li>
<li><p>Now, this is a big list. And there might be limits to what our models can accommodate, so we may have to choose the variables that are most proximal to our outcome</p></li>
<li><p>The only way to do this is via DAG, so we’ll have to draw an extensive DAG.</p></li>
</ul></li>
<li>Are you worried you are putting too many variables in the model?
<ul>
<li><p>Yes, there are some guidelines on how many variables we can put in a model per number of outcomes. The latest by Harrell is 15 events per outcome. If we think about infection rate at about 13% (which is low), that will give us about 170-200 outcomes, which means about 10-13 covariates.</p></li>
<li><p>This is a rule of thumb and we will have to play this by ear depending on how well the model converges, fit statistics, etc.</p></li>
</ul></li>
<li>What kind of fit statistics?
<ul>
<li>For our linear models, plots of residuals to ensure normality across each of covariates, and heteroscedasticity–plotting residuals across observations. ROC curves. Measures of sensitivity and specificity.</li>
</ul></li>
<li>How will changing RAT availability change your results? - What this means is that the degree of misclassification of the outcome will potentially over time.</li>
</ol>
<pre><code>-   Misclassification will depend on degree of availability of RATS, and the use of those rapid antigen tests.

-   The direction and degree to which misclassification will impact results will depend on other covariates in the data (it is differential!)

-   Luckily, we do have quarterly measures of serology, which means we have bias parameters that will change over time--so recognize that the degree to which this misclassification bias impacts our results is going to change over time. and that's key.</code></pre>
<ol start="5" type="1">
<li>How do we account for contextual changes?
<ol type="1">
<li><p>Contextual changes act as really important confounders</p></li>
<li><p>important to adjust for them or</p></li>
<li><p>think of the downstream factors that we think can be proximal confounders in order to block those backdoor paths.</p></li>
</ol></li>
<li>How do we account for clustering in parametric g-formula?
<ol type="1">
<li><p>Clustering is an issue having to do with the standard errors</p></li>
<li><p>Standard errors will look falsely narrow</p></li>
<li><p>There are cluster bootstrap methods that I am exploring.</p></li>
</ol></li>
<li>Recruitment is open longitudinal.</li>
<li>will you find a different in risk?
<ol type="1">
<li><p>We will find a hazards ratio</p></li>
<li><p>This is a relative difference in risk in the counterfactual</p>
<ol type="1">
<li>So not an absolute difference, but a relative difference</li>
</ol></li>
</ol></li>
<li>Why not use something like the e value
<ol type="1">
<li><p>The e value is the minimum association with Exposure and the outcome that would be needed to explain away the effect</p></li>
<li><p>Received criticism</p>
<ol type="1">
<li><p>Even if you have a high e value, it is possible that cumulative unmeasured confounding adds up to be more than the value of the e value</p></li>
<li><p>also, doesn’t take into account correlations between unmeasured confounders and other variables,</p></li>
</ol></li>
</ol></li>
<li>Why not use marginal structural models for time-varying exposures?
<ol type="1">
<li><p>Weights can become very unstable with marginal structural models</p></li>
<li><p>because need to multiply weights at every time point; this means weights become very big.</p></li>
<li><p>Also, from my understanding parametric g-formula has the edge when it comes to positivity violations–so the idea that we might not be able to see each level of confounder in all levels of covariate strata.</p></li>
</ol></li>
<li>What are some other examples where the parametric g-formula has been applied?
<ol type="1">
<li><p>Mechanical ventilation in the ICU and mortality.</p></li>
<li><p>air quality and mortality</p></li>
<li><p>bone marrow transplant and mortality</p></li>
</ol></li>
</ol>
<hr>
<p><strong>Project 3.</strong></p>
<ol type="1">
<li><p>Why not use propensity matching rather than test negative?</p>
<ol type="1">
<li><p>important to consider other ways of doing this study</p></li>
<li><p>Propensity matching is more challenging to do when you’ve got a time-dependent exposure, such as vaccination. Propensity scores are typically generated for each individual at study entry. But children who vaccinated very early in the study are different than those who vaccinated toward the end.</p>
<ol type="1">
<li>So you need to conduct time-dependent propensity score matching, where at each time point, you find a propensity score match between a vaccinated individual and an unvaccinated individual.</li>
</ol></li>
<li><p>I think there are some efficiency things you might have to consider here–you might not find a suitable match for every vaccinated individual at every time point, even at large sample sizes.</p></li>
<li><p>Can you walk us through some of the selection bias test-negative studies can present?</p></li>
</ol>
<pre><code>1.  Yes. The first has to do with external generalizability. We are only looking at children who test. They are very different from children who do not access testing, for a myriad of reasons, including income, resources, time, distance to clinic, etc.

2.  

3.  

4.  Type 2 selection bias--\&gt; effect modification of selection for the relationship between exposure E and D.</code></pre>
<ol start="5" type="1">
<li>Tell me about the datatsets in ICES and how you will use them</li>
</ol>
<ul>
<li>DIN - Drugs list. To figure out if they had flu vaccine; to figure out if they are on immunosuppressive medication</li>
<li>PCCF - Postal code conversion file. For neighbourhood income quintile.</li>
<li>CORR - Canadian Organ Replacement Registry. For exclusion criteria- solid organ transplant</li>
<li>DAD - Discharge Abstract Database. For exclusion criteria- immunocomp.</li>
<li>NACRS- National Ambulatory Care Reporting System. For exclusion criteria - immunocomp.</li>
<li>ODB - For flu shot,</li>
<li>OHIP - for linking datasets</li>
<li>SDS - Same day surgery. For immune disorder flag.</li>
<li>ASTHMA - Ontario Asthma Dataset.</li>
<li>HIV - Ontario HIV Dataset. For immune disorder flag.</li>
<li>OCCC - Ontario Crohn’s and COlitis Cohort dataset. FOr immune disorder flag.</li>
<li>ODD - Ontario Diabetes Dataset. For comorbidities</li>
<li>CENSUS - For area level ethnicity data</li>
<li>RPDB - Registered Persons Database. For figuring out age, sex, alive/ dead.</li>
<li>OLISC19 - OLIS Covid-19 Laboratory data</li>
<li>ONMARG - Area level co</li>
<li>C19INTGR - This data set is a comprehensive set of all available COVID-19 diagnostic laboratory results in Ontario, derived from 3&nbsp;data sources: the <strong>OLIS</strong>; <strong>CCM;</strong> distributed testing data from laboratories within the COVID-19 Provincial Diagnostic Network.</li>
<li>COVaxON - Date, prodcut type, dosage,</li>
<li>CCM s45 - Information on COVID-19 cases such as symptoms, <strong>epidemiological contacts and risk factors</strong> are not complete in the OLIS data nor are captured in other health administrative databases. Thus, to enable more descriptive reporting on COVID-19 cases, ICES started receiving daily feeds of the Public Health Case and Contact Management (CCM) Solutions database, the centralized database containing all confirmed COVID-19 cases in Ontario, which was an entirely new data holding for ICES.</li>
</ul>
<ol start="6" type="1">
<li>What comorbidities will you be adjusting for?
<ol type="1">
<li><p>Asthma</p></li>
<li><p>diabetes</p></li>
<li><p>immunocompromising conditions due to underlying diseases or therapy</p></li>
<li><p>autoimmune diseases</p></li>
<li><p>active cancer</p></li>
<li><p>pediatric complex chronic conditions·</p></li>
</ol></li>
<li>Why not use population controls?
<ol type="1">
<li><p>Written about this by Vandenbroucke and Pearce</p></li>
<li><p>So they were saying because in a pure TND, we’re comparing those who get sick from covid with those who get sick for some other reason, the factors that impact these outcomes may be very similar.</p></li>
<li><p>So a way around this is by using population controls</p>
<ol type="1">
<li><p>Vandenbroucke suggest using the accompanying person as a control–this might work for adults,</p>
<ol type="1">
<li><p>These are people who would have accessed testing if they were ill but did not.</p>
<ol type="1">
<li>but not really for children and hard to collect in ICES data</li>
</ol></li>
</ol></li>
<li><p>Other population controls possible</p>
<ol type="1">
<li><p>But you really want to make sure that these people represent children who would have accessed testing if they were ill- so the underlying source population should be the same.</p></li>
<li><p><br>
</p>
<table class="table">
<thead>
<tr class="header">
<th>Col1</th>
<th>Col2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CCM</td>
<td></td>
</tr>
<tr class="even">
<td>DIN</td>
<td>Drugs List</td>
</tr>
<tr class="odd">
<td>DAD/NACRS</td>
<td>The National Ambulatory Care Reporting System</td>
</tr>
</tbody>
</table>
<pre><code>         (NACRS) captures all visits to hospital EDs beginning in  
         2002. As with the DAD, each row of the NACRS contains     
         demographic, diagnostic, procedural and treatment         
         information for each emergency room visit.35              |</code></pre></li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
</ol>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>